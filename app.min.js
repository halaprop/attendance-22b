let a=JSON.parse(localStorage.getItem("user")),n=function(){let e={},t=window.location.search.substring(1),n=/[?&]?([^=]+)=([^&]*)/g,a;for(;null!==(a=n.exec(t));)e[decodeURIComponent(a[1])]=decodeURIComponent(a[2]);return e||{}}(),e=document.getElementById("checkin-screen"),r=document.getElementById("reg-screen"),o=document.getElementById("done-screen");async function c(){a?n.d?(s(e),document.getElementById("checkin-heading").innerHTML=t()):d():s(r)}function d(){var e=document.querySelector('input[name="table"]:checked'),e=e?e.value:null;document.getElementById("done-heading").innerHTML=t(e),s(o)}function t(e){var t="Welcome, "+(a.firstName||"");let n=(new Date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return e&&(n+=", Table "+e),`<h3>${t}<br><small class="uk-text-meta">${n}</small></h3>`}function s(t){[e,r,o].forEach(e=>{e==t?e.classList.remove("uk-hidden"):e.classList.add("uk-hidden")})}function u(){return{tb:"0f148945383c23f1c0adf4f0e24865872de25f48edee4ec50f88ab1e415c484d",ipa:"383c23f1c0adf4f.8edee4ec50f88ab1e4",ta:"patNeYtMUY5syUDLV"}}document.querySelectorAll('input[name="table"]').forEach(e=>{e.addEventListener("change",e=>document.getElementById("checkin-button").disabled=!1)}),document.getElementById("table-form").addEventListener("submit",async e=>{e.preventDefault();e=document.querySelector('input[name="table"]:checked');!async function(e=""){var t=n.d;t&&a&&(await async function(e){var t=function(e){let{"IPauth-HF":t,...n}=e;return n}({"Content-Type":"application/json",Authorization:`Bearer ${u().ta}.`+u().tb,"IPauth-HF":""+u().ipa}),t={method:"POST",headers:t};e&&(t.body=JSON.stringify({records:[{fields:e}]}));try{var n,a=await fetch("https://api.airtable.com/v0/appQ7Fisb61XmiGXG/checkins",t),r=await a.json();if(a.ok)return r;throw console.error("Error response body:",r),n=r.error?r.error.message:`HTTP error! status: ${a.status} `+a.statusText,new Error(n)}catch(e){console.error("Error message:",e.message)}}({d:t,...a,table:e}),d())}(e?e.value:null)}),document.getElementById("user-form").addEventListener("submit",function(e){e.preventDefault();var e=document.getElementById("first-name").value,t=document.getElementById("last-name").value,n=document.getElementById("student-id").value;a={firstName:e,lastName:t,studentID:n},localStorage.setItem("user",JSON.stringify(a)),c()}),c();